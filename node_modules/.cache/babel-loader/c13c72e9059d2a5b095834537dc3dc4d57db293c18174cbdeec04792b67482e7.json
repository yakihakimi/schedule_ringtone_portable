{"ast":null,"code":"var _jsxFileName = \"C:\\\\devops\\\\schedule_ringtone\\\\portable_app\\\\src\\\\components\\\\FileUpload.tsx\",\n  _s = $RefreshSig$();\n// Rules applied\nimport React, { useRef, useState, useCallback } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FileUpload = ({\n  onFileUpload\n}) => {\n  _s();\n  const [isDragOver, setIsDragOver] = useState(false);\n  const [error, setError] = useState(null);\n  const fileInputRef = useRef(null);\n  const handleFile = useCallback(async file => {\n    try {\n      if (!file.type.startsWith('audio/')) {\n        throw new Error('Please select an audio file (MP3, WAV, etc.)');\n      }\n      if (file.size > 100 * 1024 * 1024) {\n        // 100MB limit\n        throw new Error('File size too large. Please select a file under 100MB');\n      }\n      const url = URL.createObjectURL(file);\n\n      // Get audio duration\n      const audio = new Audio();\n      audio.src = url;\n      const duration = await new Promise(resolve => {\n        audio.addEventListener('loadedmetadata', () => {\n          resolve(audio.duration);\n        });\n        audio.addEventListener('error', () => {\n          resolve(0);\n        });\n      });\n      const audioFile = {\n        id: Date.now().toString(),\n        name: file.name,\n        url,\n        duration,\n        file,\n        type: 'original'\n      };\n      onFileUpload(audioFile);\n      setError(null);\n    } catch (error) {\n      console.error('Error processing file:', error);\n      setError(error instanceof Error ? error.message : 'Error processing file');\n    }\n  }, [onFileUpload]);\n  const handleDragOver = useCallback(e => {\n    e.preventDefault();\n    setIsDragOver(true);\n  }, []);\n  const handleDragLeave = useCallback(e => {\n    e.preventDefault();\n    setIsDragOver(false);\n  }, []);\n  const handleDrop = useCallback(e => {\n    e.preventDefault();\n    setIsDragOver(false);\n    const files = Array.from(e.dataTransfer.files);\n    if (files.length > 0) {\n      handleFile(files[0]);\n    }\n  }, [handleFile]);\n  const handleFileSelect = useCallback(e => {\n    const files = e.target.files;\n    if (files && files.length > 0) {\n      handleFile(files[0]);\n    }\n  }, [handleFile]);\n  const handleClick = useCallback(() => {\n    var _fileInputRef$current;\n    (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"file-upload\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: `upload-area ${isDragOver ? 'drag-over' : ''}`,\n      onDragOver: handleDragOver,\n      onDragLeave: handleDragLeave,\n      onDrop: handleDrop,\n      onClick: handleClick,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"upload-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"upload-icon\",\n          children: \"\\uD83D\\uDCC1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Drag & Drop MP3 Files Here\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"or click to browse files\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"file-types\",\n          children: \"Supported: MP3, WAV, OGG\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      ref: fileInputRef,\n      type: \"file\",\n      accept: \"audio/*\",\n      onChange: handleFileSelect,\n      style: {\n        display: 'none'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\u274C \", error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setError(null),\n        children: \"Dismiss\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n};\n_s(FileUpload, \"i4d/WO8hd8UDIbO7e80fhF+KV9c=\");\n_c = FileUpload;\nexport default FileUpload;\nvar _c;\n$RefreshReg$(_c, \"FileUpload\");","map":{"version":3,"names":["React","useRef","useState","useCallback","jsxDEV","_jsxDEV","FileUpload","onFileUpload","_s","isDragOver","setIsDragOver","error","setError","fileInputRef","handleFile","file","type","startsWith","Error","size","url","URL","createObjectURL","audio","Audio","src","duration","Promise","resolve","addEventListener","audioFile","id","Date","now","toString","name","console","message","handleDragOver","e","preventDefault","handleDragLeave","handleDrop","files","Array","from","dataTransfer","length","handleFileSelect","target","handleClick","_fileInputRef$current","current","click","className","children","onDragOver","onDragLeave","onDrop","onClick","fileName","_jsxFileName","lineNumber","columnNumber","ref","accept","onChange","style","display","_c","$RefreshReg$"],"sources":["C:/devops/schedule_ringtone/portable_app/src/components/FileUpload.tsx"],"sourcesContent":["// Rules applied\r\nimport React, { useRef, useState, useCallback } from 'react';\r\nimport { AudioFile } from '../types/audio';\r\n\r\ninterface FileUploadProps {\r\n  onFileUpload: (file: AudioFile) => void;\r\n}\r\n\r\nconst FileUpload: React.FC<FileUploadProps> = ({ onFileUpload }) => {\r\n  const [isDragOver, setIsDragOver] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const handleFile = useCallback(async (file: File) => {\r\n    try {\r\n      if (!file.type.startsWith('audio/')) {\r\n        throw new Error('Please select an audio file (MP3, WAV, etc.)');\r\n      }\r\n\r\n      if (file.size > 100 * 1024 * 1024) { // 100MB limit\r\n        throw new Error('File size too large. Please select a file under 100MB');\r\n      }\r\n\r\n      const url = URL.createObjectURL(file);\r\n      \r\n      // Get audio duration\r\n      const audio = new Audio();\r\n      audio.src = url;\r\n      \r\n      const duration = await new Promise<number>((resolve) => {\r\n        audio.addEventListener('loadedmetadata', () => {\r\n          resolve(audio.duration);\r\n        });\r\n        audio.addEventListener('error', () => {\r\n          resolve(0);\r\n        });\r\n      });\r\n\r\n      const audioFile: AudioFile = {\r\n        id: Date.now().toString(),\r\n        name: file.name,\r\n        url,\r\n        duration,\r\n        file,\r\n        type: 'original'\r\n      };\r\n\r\n      onFileUpload(audioFile);\r\n      setError(null);\r\n    } catch (error) {\r\n      console.error('Error processing file:', error);\r\n      setError(error instanceof Error ? error.message : 'Error processing file');\r\n    }\r\n  }, [onFileUpload]);\r\n\r\n  const handleDragOver = useCallback((e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    setIsDragOver(true);\r\n  }, []);\r\n\r\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    setIsDragOver(false);\r\n  }, []);\r\n\r\n  const handleDrop = useCallback((e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    setIsDragOver(false);\r\n    \r\n    const files = Array.from(e.dataTransfer.files);\r\n    if (files.length > 0) {\r\n      handleFile(files[0]);\r\n    }\r\n  }, [handleFile]);\r\n\r\n  const handleFileSelect = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const files = e.target.files;\r\n    if (files && files.length > 0) {\r\n      handleFile(files[0]);\r\n    }\r\n  }, [handleFile]);\r\n\r\n  const handleClick = useCallback(() => {\r\n    fileInputRef.current?.click();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"file-upload\">\r\n      <div\r\n        className={`upload-area ${isDragOver ? 'drag-over' : ''}`}\r\n        onDragOver={handleDragOver}\r\n        onDragLeave={handleDragLeave}\r\n        onDrop={handleDrop}\r\n        onClick={handleClick}\r\n      >\r\n        <div className=\"upload-content\">\r\n          <div className=\"upload-icon\">üìÅ</div>\r\n          <h3>Drag & Drop MP3 Files Here</h3>\r\n          <p>or click to browse files</p>\r\n          <p className=\"file-types\">Supported: MP3, WAV, OGG</p>\r\n        </div>\r\n      </div>\r\n      \r\n      <input\r\n        ref={fileInputRef}\r\n        type=\"file\"\r\n        accept=\"audio/*\"\r\n        onChange={handleFileSelect}\r\n        style={{ display: 'none' }}\r\n      />\r\n      \r\n      {error && (\r\n        <div className=\"error-message\">\r\n          <p>‚ùå {error}</p>\r\n          <button onClick={() => setError(null)}>Dismiss</button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FileUpload;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}